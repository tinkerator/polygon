package polygon

import (
	"strings"
	"testing"
)

func TestOverhang(t *testing.T) {
	var s *Shapes
	s = s.Builder(
		/* poly0 ["11"] */ []Point{
			{-0.98884142, 2.63796423},
			{-0.76554454, 2.41466735},
			{-0.59010595, 2.59010595},
			{-0.81340283, 2.81340283},
		}...).Builder(
		/* poly1 ["12"] */ []Point{
			{-0.85964912, 2.70175439},
			{-0.85961155, 2.69830993},
			{-0.85949884, 2.69486711},
			{-0.85931106, 2.69142758},
			{-0.85904829, 2.68799295},
			{-0.85871065, 2.68456488},
			{-0.85829831, 2.68114499},
			{-0.85781147, 2.67773490},
			{-0.85725035, 2.67433625},
			{-0.85661522, 2.67095065},
			{-0.85590639, 2.66757971},
			{-0.85512419, 2.66422503},
			{-0.85426899, 2.66088822},
			{-0.85334121, 2.65757086},
			{-0.85234127, 2.65427452},
			{-0.85126967, 2.65100079},
			{-0.85012691, 2.64775121},
			{-0.84891352, 2.64452733},
			{-0.84763010, 2.64133069},
			{-0.84627725, 2.63816280},
			{-0.84485562, 2.63502519},
			{-0.84336587, 2.63191933},
			{-0.84180873, 2.62884671},
			{-0.84018493, 2.62580879},
			{-0.83849524, 2.62280702},
			{-0.83674047, 2.61984282},
			{-0.83492146, 2.61691761},
			{-0.83303906, 2.61403277},
			{-0.83109418, 2.61118969},
			{-0.82908774, 2.60838970},
			{-0.82702070, 2.60563416},
			{-0.82489404, 2.60292436},
			{-0.82270877, 2.60026161},
			{-0.82046593, 2.59764715},
			{-0.81816660, 2.59508225},
			{-0.81581185, 2.59256811},
			{-0.81340283, 2.59010595},
			{-0.81094066, 2.58769692},
			{-0.80842652, 2.58534217},
			{-0.80586162, 2.58304284},
			{-0.80324717, 2.58080000},
			{-0.80058441, 2.57861473},
			{-0.79787461, 2.57648807},
			{-0.79511907, 2.57442103},
			{-0.79231909, 2.57241459},
			{-0.78947600, 2.57046971},
			{-0.78659117, 2.56858732},
			{-0.78366595, 2.56676830},
			{-0.78070175, 2.56501353},
			{-0.77769998, 2.56332385},
			{-0.77466206, 2.56170004},
			{-0.77158944, 2.56014290},
			{-0.76848359, 2.55865316},
			{-0.76534597, 2.55723152},
			{-0.76217809, 2.55587867},
			{-0.75898144, 2.55459525},
			{-0.75575757, 2.55338187},
			{-0.75250799, 2.55223910},
			{-0.74923425, 2.55116750},
			{-0.74593791, 2.55016757},
			{-0.74262055, 2.54923978},
			{-0.73928374, 2.54838459},
			{-0.73592906, 2.54760238},
			{-0.73255812, 2.54689355},
			{-0.72917252, 2.54625842},
			{-0.72577387, 2.54569731},
			{-0.72236378, 2.54521046},
			{-0.71894389, 2.54479812},
			{-0.71551582, 2.54446049},
			{-0.71208120, 2.54419771},
			{-0.70864166, 2.54400993},
			{-0.70519884, 2.54389722},
			{-0.70175439, 2.54385965},
			{-0.69830993, 2.54389722},
			{-0.69486711, 2.54400993},
			{-0.69142758, 2.54419771},
			{-0.68799295, 2.54446049},
			{-0.68456488, 2.54479812},
			{-0.68114499, 2.54521046},
			{-0.67773490, 2.54569731},
			{-0.67433625, 2.54625842},
			{-0.67095065, 2.54689355},
			{-0.66757971, 2.54760238},
			{-0.66422503, 2.54838459},
			{-0.66088822, 2.54923978},
			{-0.65757086, 2.55016757},
			{-0.65427452, 2.55116750},
			{-0.65100079, 2.55223910},
			{-0.64775121, 2.55338187},
			{-0.64452733, 2.55459525},
			{-0.64133069, 2.55587867},
			{-0.63816280, 2.55723152},
			{-0.63502519, 2.55865316},
			{-0.63191933, 2.56014290},
			{-0.62884671, 2.56170004},
			{-0.62580879, 2.56332385},
			{-0.62280702, 2.56501353},
			{-0.61984282, 2.56676830},
			{-0.61691761, 2.56858732},
			{-0.61403277, 2.57046971},
			{-0.61118969, 2.57241459},
			{-0.60838970, 2.57442103},
			{-0.60563416, 2.57648807},
			{-0.60292436, 2.57861473},
			{-0.60026161, 2.58080000},
			{-0.59764715, 2.58304284},
			{-0.59508225, 2.58534217},
			{-0.59256811, 2.58769692},
			{-0.59010595, 2.59010595},
			{-0.58769692, 2.59256811},
			{-0.58534217, 2.59508225},
			{-0.58304284, 2.59764715},
			{-0.58080000, 2.60026161},
			{-0.57861473, 2.60292436},
			{-0.57648807, 2.60563416},
			{-0.57442103, 2.60838970},
			{-0.57241459, 2.61118969},
			{-0.57046971, 2.61403277},
			{-0.56858732, 2.61691761},
			{-0.56676830, 2.61984282},
			{-0.56501353, 2.62280702},
			{-0.56332385, 2.62580879},
			{-0.56170004, 2.62884671},
			{-0.56014290, 2.63191933},
			{-0.55865316, 2.63502519},
			{-0.55723152, 2.63816280},
			{-0.55587867, 2.64133069},
			{-0.55459525, 2.64452733},
			{-0.55338187, 2.64775121},
			{-0.55223910, 2.65100079},
			{-0.55116750, 2.65427452},
			{-0.55016757, 2.65757086},
			{-0.54923978, 2.66088822},
			{-0.54838459, 2.66422503},
			{-0.54760238, 2.66757971},
			{-0.54689355, 2.67095065},
			{-0.54625842, 2.67433625},
			{-0.54569731, 2.67773490},
			{-0.54521046, 2.68114499},
			{-0.54479812, 2.68456488},
			{-0.54446049, 2.68799295},
			{-0.54419771, 2.69142758},
			{-0.54400993, 2.69486711},
			{-0.54389722, 2.69830993},
			{-0.54385965, 2.70175439},
			{-0.54389722, 2.70519884},
			{-0.54400993, 2.70864166},
			{-0.54419771, 2.71208120},
			{-0.54446049, 2.71551582},
			{-0.54479812, 2.71894389},
			{-0.54521046, 2.72236378},
			{-0.54569731, 2.72577387},
			{-0.54625842, 2.72917252},
			{-0.54689355, 2.73255812},
			{-0.54760238, 2.73592906},
			{-0.54838459, 2.73928374},
			{-0.54923978, 2.74262055},
			{-0.55016757, 2.74593791},
			{-0.55116750, 2.74923425},
			{-0.55223910, 2.75250799},
			{-0.55338187, 2.75575757},
			{-0.55459525, 2.75898144},
			{-0.55587867, 2.76217809},
			{-0.55723152, 2.76534597},
			{-0.55865316, 2.76848359},
			{-0.56014290, 2.77158944},
			{-0.56170004, 2.77466206},
			{-0.56332385, 2.77769998},
			{-0.56501353, 2.78070175},
			{-0.56676830, 2.78366595},
			{-0.56858732, 2.78659117},
			{-0.57046971, 2.78947600},
			{-0.57241459, 2.79231909},
			{-0.57442103, 2.79511907},
			{-0.57648807, 2.79787461},
			{-0.57861473, 2.80058441},
			{-0.58080000, 2.80324717},
			{-0.58304284, 2.80586162},
			{-0.58534217, 2.80842652},
			{-0.58769692, 2.81094066},
			{-0.59010595, 2.81340283},
			{-0.59256811, 2.81581185},
			{-0.59508225, 2.81816660},
			{-0.59764715, 2.82046593},
			{-0.60026161, 2.82270877},
			{-0.60292436, 2.82489404},
			{-0.60563416, 2.82702070},
			{-0.60838970, 2.82908774},
			{-0.61118969, 2.83109418},
			{-0.61403277, 2.83303906},
			{-0.61691761, 2.83492146},
			{-0.61984282, 2.83674047},
			{-0.62280702, 2.83849524},
			{-0.62580879, 2.84018493},
			{-0.62884671, 2.84180873},
			{-0.63191933, 2.84336587},
			{-0.63502519, 2.84485562},
			{-0.63816280, 2.84627725},
			{-0.64133069, 2.84763010},
			{-0.64452733, 2.84891352},
			{-0.64775121, 2.85012691},
			{-0.65100079, 2.85126967},
			{-0.65427452, 2.85234127},
			{-0.65757086, 2.85334121},
			{-0.66088822, 2.85426899},
			{-0.66422503, 2.85512419},
			{-0.66757971, 2.85590639},
			{-0.67095065, 2.85661522},
			{-0.67433625, 2.85725035},
			{-0.67773490, 2.85781147},
			{-0.68114499, 2.85829831},
			{-0.68456488, 2.85871065},
			{-0.68799295, 2.85904829},
			{-0.69142758, 2.85931106},
			{-0.69486711, 2.85949884},
			{-0.69830993, 2.85961155},
			{-0.70175439, 2.85964912},
			{-0.70519884, 2.85961155},
			{-0.70864166, 2.85949884},
			{-0.71208120, 2.85931106},
			{-0.71551582, 2.85904829},
			{-0.71894389, 2.85871065},
			{-0.72236378, 2.85829831},
			{-0.72577387, 2.85781147},
			{-0.72917252, 2.85725035},
			{-0.73255812, 2.85661522},
			{-0.73592906, 2.85590639},
			{-0.73928374, 2.85512419},
			{-0.74262055, 2.85426899},
			{-0.74593791, 2.85334121},
			{-0.74923425, 2.85234127},
			{-0.75250799, 2.85126967},
			{-0.75575757, 2.85012691},
			{-0.75898144, 2.84891352},
			{-0.76217809, 2.84763010},
			{-0.76534597, 2.84627725},
			{-0.76848359, 2.84485562},
			{-0.77158944, 2.84336587},
			{-0.77466206, 2.84180873},
			{-0.77769998, 2.84018493},
			{-0.78070175, 2.83849524},
			{-0.78366595, 2.83674047},
			{-0.78659117, 2.83492146},
			{-0.78947600, 2.83303906},
			{-0.79231909, 2.83109418},
			{-0.79511907, 2.82908774},
			{-0.79787461, 2.82702070},
			{-0.80058441, 2.82489404},
			{-0.80324717, 2.82270877},
			{-0.80586162, 2.82046593},
			{-0.80842652, 2.81816660},
			{-0.81094066, 2.81581185},
			{-0.81340283, 2.81340283},
			{-0.81581185, 2.81094066},
			{-0.81816660, 2.80842652},
			{-0.82046593, 2.80586162},
			{-0.82270877, 2.80324717},
			{-0.82489404, 2.80058441},
			{-0.82702070, 2.79787461},
			{-0.82908774, 2.79511907},
			{-0.83109418, 2.79231909},
			{-0.83303906, 2.78947600},
			{-0.83492146, 2.78659117},
			{-0.83674047, 2.78366595},
			{-0.83849524, 2.78070175},
			{-0.84018493, 2.77769998},
			{-0.84180873, 2.77466206},
			{-0.84336587, 2.77158944},
			{-0.84485562, 2.76848359},
			{-0.84627725, 2.76534597},
			{-0.84763010, 2.76217809},
			{-0.84891352, 2.75898144},
			{-0.85012691, 2.75575757},
			{-0.85126967, 2.75250799},
			{-0.85234127, 2.74923425},
			{-0.85334121, 2.74593791},
			{-0.85426899, 2.74262055},
			{-0.85512419, 2.73928374},
			{-0.85590639, 2.73592906},
			{-0.85661522, 2.73255812},
			{-0.85725035, 2.72917252},
			{-0.85781147, 2.72577387},
			{-0.85829831, 2.72236378},
			{-0.85871065, 2.71894389},
			{-0.85904829, 2.71551582},
			{-0.85931106, 2.71208120},
			{-0.85949884, 2.70864166},
			{-0.85961155, 2.70519884},
		}...).Builder(
		/* poly2 ["13"] */ []Point{
			{-0.77236706, 2.84297973},
			{-0.63114171, 2.56052904},
			{-0.28026452, 2.73596764},
			{-0.42148987, 3.01841833},
		}...).Builder(
		/* poly3 ["15"] */ []Point{
			{-0.35087719, 2.71929825},
			{0.35087719, 2.71929825},
			{0.35087719, 3.03508772},
			{-0.35087719, 3.03508772},
		}...).Builder(
		/* poly4 ["37"] */ []Point{
			{0.23922875, 2.76554454},
			{0.41466735, 2.59010595},
			{0.63796423, 2.81340283},
			{0.46252563, 2.98884142},
		}...).Builder(
		/* poly5 ["39"] */ []Point{
			{0.38509044, 2.63114171},
			{0.56052904, 2.28026452},
			{0.84297973, 2.42148987},
			{0.66754114, 2.77236706},
		}...).Builder(
		/* poly6 ["41"] */ []Point{
			{0.54385965, 0.94736842},
			{0.85964912, 0.94736842},
			{0.85964912, 2.35087719},
			{0.54385965, 2.35087719},
		}...).Builder(
		/* poly7 ["52"] */ []Point{
			{-0.38184290, 1.80395133},
			{-0.31991149, 1.49429428},
			{0.55728150, 1.66973288},
			{0.49535008, 1.97938993},
		}...).Builder(
		/* poly8 ["54"] */ []Point{
			{-0.92712368, 1.62347631},
			{-0.82726228, 1.32389211},
			{-0.30094649, 1.49933071},
			{-0.40080789, 1.79891491},
		}...).Builder(
		/* poly9 ["56"] */ []Point{
			{-1.19385692, 1.19341969},
			{-0.91140623, 1.05219434},
			{-0.73596764, 1.40307154},
			{-1.01841833, 1.54429688},
		}...)
	s.Union()
	if len(s.P) != 1 {
		t.Fatalf("got %d shapes, want 1", len(s.P))
	}
	if !strings.Contains(s.P[0].Index, "^1.0") {
		t.Fatalf("dropped circle poly1")
	}
}
